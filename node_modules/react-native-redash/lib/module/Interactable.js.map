{"version":3,"sources":["Interactable.tsx"],"names":["React","Animated","PanGestureHandler","State","add","cond","diff","divide","eq","event","exp","lessThan","and","call","block","multiply","pow","set","abs","clockRunning","greaterOrEq","lessOrEq","sqrt","startClock","stopClock","sub","Clock","Value","ANIMATOR_PAUSE_CONSECUTIVE_FRAMES","ANIMATOR_PAUSE_ZERO_VELOCITY","DEFAULT_SNAP_TENSION","DEFAULT_SNAP_DAMPING","DEFAULT_GRAVITY_STRENGTH","DEFAULT_GRAVITY_FALLOF","sq","x","influenceAreaWithRadius","radius","anchor","left","right","top","y","bottom","snapTo","target","snapPoints","best","clb","dragClb","dist","snap","pt","tension","damping","snapDist","map","newDist","bx","by","forEach","index","undefined","nativeEvent","targetSnapPointId","id","state","springBehavior","dt","obj","dx","ax","mass","dy","ay","vx","vy","frictionBehavior","friction","anchorBehavior","gravityBehavior","strength","falloff","drsq","dr","a","div","bounceBehavior","area","bounce","xnodes","ynodes","flipx","flipy","push","withInfluence","behavior","testLeft","testRight","testTop","testBottom","testNodes","filter","t","test","slice","withLimits","value","lowerBound","upperBound","result","Interactable","props","gesture","onGestureEvent","translationX","translationY","initialPosition","update","animatedValueX","animatedValueY","clock","tossedTarget","dragToss","permBuckets","addSpring","influence","buckets","addFriction","addGravity","dragAnchor","dragBuckets","dragWithSpring","handleStartDrag","onDrag","snapBuckets","snapAnchor","updateSnapTo","onSnap","springPoints","influenceArea","gravityPoints","frictionAreas","boundaries","sortBuckets","specialBuckets","b","idx","reverse","b1","reduce","acc","b2","concat","dragBehaviors","snapBehaviors","noMovementFrames","verticalOnly","horizontalOnly","stopWhenNeeded","onStop","trans","axis","vaxis","dragging","start","drag","advance","last","Number","MAX_SAFE_INTEGER","noMoveFrameCount","testMovementFrames","step","ACTIVE","wrapStep","dragEnabled","velocity","doUpdateAnReturn","position","transX","transY","setValue","snapPoint","children","style","enabled","transform","translateX","translateY","PureComponent","defaultProps"],"mappings":"6oBACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,OAASC,iBAAT,CAA4BC,KAA5B,KAAyC,8BAAzC,C,GAIEC,CAAAA,G,CAwBEH,Q,CAxBFG,G,CACAC,I,CAuBEJ,Q,CAvBFI,I,CACAC,I,CAsBEL,Q,CAtBFK,I,CACAC,M,CAqBEN,Q,CArBFM,M,CACAC,E,CAoBEP,Q,CApBFO,E,CACAC,K,CAmBER,Q,CAnBFQ,K,CACAC,G,CAkBET,Q,CAlBFS,G,CACAC,Q,CAiBEV,Q,CAjBFU,Q,CACAC,G,CAgBEX,Q,CAhBFW,G,CACAC,I,CAeEZ,Q,CAfFY,I,CACAC,K,CAcEb,Q,CAdFa,K,CACAC,Q,CAaEd,Q,CAbFc,Q,CACAC,G,CAYEf,Q,CAZFe,G,CACAC,G,CAWEhB,Q,CAXFgB,G,CACAC,G,CAUEjB,Q,CAVFiB,G,CACAC,Y,CASElB,Q,CATFkB,Y,CACAC,W,CAQEnB,Q,CARFmB,W,CACAC,Q,CAOEpB,Q,CAPFoB,Q,CACAC,I,CAMErB,Q,CANFqB,I,CACAC,U,CAKEtB,Q,CALFsB,U,CACAC,S,CAIEvB,Q,CAJFuB,S,CACAC,G,CAGExB,Q,CAHFwB,G,CACAC,K,CAEEzB,Q,CAFFyB,K,CACAC,K,CACE1B,Q,CADF0B,K,CAGF,OAASvB,GAAT,EAIA,GAAMwB,CAAAA,iCAAiC,CAAG,EAA1C,CACA,GAAMC,CAAAA,4BAA4B,CAAG,CAArC,CACA,GAAMC,CAAAA,oBAAoB,CAAG,GAA7B,CACA,GAAMC,CAAAA,oBAAoB,CAAG,GAA7B,CACA,GAAMC,CAAAA,wBAAwB,CAAG,GAAjC,CACA,GAAMC,CAAAA,sBAAsB,CAAG,EAA/B,CAEA,QAASC,CAAAA,EAAT,CAAYC,CAAZ,CAAoB,CAClB,MAAOpB,CAAAA,QAAQ,CAACoB,CAAD,CAAIA,CAAJ,CAAf,CACD,CAED,QAASC,CAAAA,uBAAT,CAAiCC,MAAjC,CAAiDC,MAAjD,CAA8D,CAC5D,MAAO,CACLC,IAAI,CAAE,CAACD,MAAM,CAACH,CAAP,EAAY,CAAb,EAAkBE,MADnB,CAELG,KAAK,CAAE,CAACF,MAAM,CAACH,CAAP,EAAY,CAAb,EAAkBE,MAFpB,CAGLI,GAAG,CAAE,CAACH,MAAM,CAACI,CAAP,EAAY,CAAb,EAAkBL,MAHlB,CAILM,MAAM,CAAE,CAACL,MAAM,CAACI,CAAP,EAAY,CAAb,EAAkBL,MAJrB,CAAP,CAMD,CAED,QAASO,CAAAA,MAAT,CAAgBC,MAAhB,CAA6BC,UAA7B,CAA8CC,IAA9C,CAAyDC,GAAzD,CAAmEC,OAAnE,CAAiF,CAC/E,GAAMC,CAAAA,IAAI,CAAG,GAAIvB,CAAAA,KAAJ,CAAU,CAAV,CAAb,CACA,GAAMwB,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,EAAD,QAAa,CACxBnC,GAAG,CAAC8B,IAAI,CAACM,OAAN,CAAeD,EAAE,CAACC,OAAH,EAAcvB,oBAA7B,CADqB,CAExBb,GAAG,CAAC8B,IAAI,CAACO,OAAN,CAAeF,EAAE,CAACE,OAAH,EAAcvB,oBAA7B,CAFqB,CAGxBd,GAAG,CAAC8B,IAAI,CAACZ,CAAN,CAASiB,EAAE,CAACjB,CAAH,EAAQ,CAAjB,CAHqB,CAIxBlB,GAAG,CAAC8B,IAAI,CAACL,CAAN,CAASU,EAAE,CAACV,CAAH,EAAQ,CAAjB,CAJqB,CAAb,EAAb,CAMA,GAAMa,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACH,EAAD,QAAahD,CAAAA,GAAG,CAAC8B,EAAE,CAACT,GAAG,CAACoB,MAAM,CAACV,CAAR,CAAWiB,EAAE,CAACjB,CAAH,EAAQ,CAAnB,CAAJ,CAAH,CAA+BD,EAAE,CAACT,GAAG,CAACoB,MAAM,CAACH,CAAR,CAAWU,EAAE,CAACV,CAAH,EAAQ,CAAnB,CAAJ,CAAjC,CAAhB,EAAjB,CACA,OACEzB,GAAG,CAACiC,IAAD,CAAOK,QAAQ,CAACT,UAAU,CAAC,CAAD,CAAX,CAAf,CADL,4BAEKK,IAAI,CAACL,UAAU,CAAC,CAAD,CAAX,CAFT,qBAGKA,UAAU,CAACU,GAAX,CAAe,SAACJ,EAAD,CAAa,CAC7B,GAAMK,CAAAA,OAAO,CAAGF,QAAQ,CAACH,EAAD,CAAxB,CACA,MAAO/C,CAAAA,IAAI,CAACM,QAAQ,CAAC8C,OAAD,CAAUP,IAAV,CAAT,EAA2BjC,GAAG,CAACiC,IAAD,CAAOO,OAAP,CAA9B,4BAAkDN,IAAI,CAACC,EAAD,CAAtD,GAAX,CACD,CAHE,CAHL,GAOE,CAACJ,GAAG,EAAIC,OAAR,GACKpC,IAAI,CAAC,CAACkC,IAAI,CAACZ,CAAN,CAASY,IAAI,CAACL,CAAd,CAAiBG,MAAM,CAACV,CAAxB,CAA2BU,MAAM,CAACH,CAAlC,CAAD,CAAuC,cAAoB,kCAAlBgB,EAAkB,UAAdC,EAAc,UAAVxB,CAAU,UAAPO,CAAO,UAChEI,UAAU,CAACc,OAAX,CAAmB,SAACR,EAAD,CAAUS,KAAV,CAA4B,CAC7C,GACE,CAACT,EAAE,CAACjB,CAAH,GAAS2B,SAAT,EAAsBV,EAAE,CAACjB,CAAH,GAASuB,EAAhC,IACIN,EAAE,CAACV,CAAH,GAASoB,SAAT,EAAsBV,EAAE,CAACV,CAAH,GAASiB,EADnC,CADF,CAGE,CACA,GAAIX,GAAJ,CAAS,CACPA,GAAG,CAAC,CAAEe,WAAW,kBAAOX,EAAP,EAAWS,KAAK,CAALA,KAAX,EAAb,CAAD,CAAH,CACD,CACD,GAAIZ,OAAJ,CAAa,CACXA,OAAO,CAAC,CACNc,WAAW,CAAE,CACX5B,CAAC,CAADA,CADW,CACRO,CAAC,CAADA,CADQ,CACLsB,iBAAiB,CAAEZ,EAAE,CAACa,EADjB,CACqBC,KAAK,CAAE,KAD5B,CADP,CAAD,CAAP,CAKD,CACF,CACF,CAhBD,EAiBD,CAlBM,CARX,GA4BD,CAED,QAASC,CAAAA,cAAT,CAAwBC,EAAxB,CAAiCvB,MAAjC,CAA8CwB,GAA9C,CAAwD/B,MAAxD,CAA4F,IAAvBe,CAAAA,OAAuB,2DAAL,GAAK,CAC1F,GAAMiB,CAAAA,EAAE,CAAG7C,GAAG,CAACoB,MAAM,CAACV,CAAR,CAAWG,MAAM,CAACH,CAAlB,CAAd,CACA,GAAMoC,CAAAA,EAAE,CAAGhE,MAAM,CAACQ,QAAQ,CAAC,CAAC,CAAF,CAAKsC,OAAL,CAAciB,EAAd,CAAT,CAA4BD,GAAG,CAACG,IAAhC,CAAjB,CACA,GAAMC,CAAAA,EAAE,CAAGhD,GAAG,CAACoB,MAAM,CAACH,CAAR,CAAWJ,MAAM,CAACI,CAAlB,CAAd,CACA,GAAMgC,CAAAA,EAAE,CAAGnE,MAAM,CAACQ,QAAQ,CAAC,CAAC,CAAF,CAAKsC,OAAL,CAAcoB,EAAd,CAAT,CAA4BJ,GAAG,CAACG,IAAhC,CAAjB,CACA,MAAO,CACLrC,CAAC,CAAElB,GAAG,CAACoD,GAAG,CAACM,EAAL,CAASvE,GAAG,CAACiE,GAAG,CAACM,EAAL,CAAS5D,QAAQ,CAACqD,EAAD,CAAKG,EAAL,CAAjB,CAAZ,CADD,CAEL7B,CAAC,CAAEzB,GAAG,CAACoD,GAAG,CAACO,EAAL,CAASxE,GAAG,CAACiE,GAAG,CAACO,EAAL,CAAS7D,QAAQ,CAACqD,EAAD,CAAKM,EAAL,CAAjB,CAAZ,CAFD,CAAP,CAID,CAED,QAASG,CAAAA,gBAAT,CAA0BT,EAA1B,CAAmCC,GAAnC,CAAoE,IAAvBf,CAAAA,OAAuB,2DAAL,GAAK,CAClE,GAAMwB,CAAAA,QAAQ,CAAG9D,GAAG,CAACsC,OAAD,CAAUvC,QAAQ,CAAC,EAAD,CAAKqD,EAAL,CAAlB,CAApB,CACA,MAAO,CACLjC,CAAC,CAAElB,GAAG,CAACoD,GAAG,CAACM,EAAL,CAAS5D,QAAQ,CAACsD,GAAG,CAACM,EAAL,CAASG,QAAT,CAAjB,CADD,CAELpC,CAAC,CAAEzB,GAAG,CAACoD,GAAG,CAACO,EAAL,CAAS7D,QAAQ,CAACsD,GAAG,CAACO,EAAL,CAASE,QAAT,CAAjB,CAFD,CAAP,CAID,CAED,QAASC,CAAAA,cAAT,CAAwBX,EAAxB,CAAiCvB,MAAjC,CAA8CwB,GAA9C,CAAwD/B,MAAxD,CAAqE,CACnE,GAAMgC,CAAAA,EAAE,CAAG7C,GAAG,CAACa,MAAM,CAACH,CAAR,CAAWU,MAAM,CAACV,CAAlB,CAAd,CACA,GAAMsC,CAAAA,EAAE,CAAGhD,GAAG,CAACa,MAAM,CAACI,CAAR,CAAWG,MAAM,CAACH,CAAlB,CAAd,CACA,MAAO,CACLP,CAAC,CAAElB,GAAG,CAACoD,GAAG,CAACM,EAAL,CAASpE,MAAM,CAAC+D,EAAD,CAAKF,EAAL,CAAf,CADD,CAEL1B,CAAC,CAAEzB,GAAG,CAACoD,GAAG,CAACO,EAAL,CAASrE,MAAM,CAACkE,EAAD,CAAKL,EAAL,CAAf,CAFD,CAAP,CAID,CAED,QAASY,CAAAA,eAAT,CACEZ,EADF,CAEEvB,MAFF,CAGEwB,GAHF,CAIE/B,MAJF,CAOE,IAFA2C,CAAAA,QAEA,2DAFmBjD,wBAEnB,IADAkD,CAAAA,OACA,2DADkBjD,sBAClB,CACA,GAAMqC,CAAAA,EAAE,CAAG7C,GAAG,CAACoB,MAAM,CAACV,CAAR,CAAWG,MAAM,CAACH,CAAlB,CAAd,CACA,GAAMsC,CAAAA,EAAE,CAAGhD,GAAG,CAACoB,MAAM,CAACH,CAAR,CAAWJ,MAAM,CAACI,CAAlB,CAAd,CACA,GAAMyC,CAAAA,IAAI,CAAG/E,GAAG,CAAC8B,EAAE,CAACoC,EAAD,CAAH,CAASpC,EAAE,CAACuC,EAAD,CAAX,CAAhB,CACA,GAAMW,CAAAA,EAAE,CAAG9D,IAAI,CAAC6D,IAAD,CAAf,CACA,GAAME,CAAAA,CAAC,CAAG9E,MAAM,CACdQ,QAAQ,CAAC,CAAC,CAAF,CAAKkE,QAAL,CAAeG,EAAf,CAAmB1E,GAAG,CAACH,MAAM,CAACQ,QAAQ,CAAC,CAAC,GAAF,CAAOoE,IAAP,CAAT,CAAuBjD,EAAE,CAACgD,OAAD,CAAzB,CAAP,CAAtB,CADM,CAEdb,GAAG,CAACG,IAFU,CAAhB,CAIA,GAAMc,CAAAA,GAAG,CAAG/E,MAAM,CAAC8E,CAAD,CAAID,EAAJ,CAAlB,CACA,MAAO,CACLjD,CAAC,CAAE9B,IAAI,CAAC+E,EAAD,CAAKnE,GAAG,CAACoD,GAAG,CAACM,EAAL,CAASvE,GAAG,CAACiE,GAAG,CAACM,EAAL,CAAS5D,QAAQ,CAACqD,EAAD,CAAKE,EAAL,CAASgB,GAAT,CAAjB,CAAZ,CAAR,CADF,CAEL5C,CAAC,CAAErC,IAAI,CAAC+E,EAAD,CAAKnE,GAAG,CAACoD,GAAG,CAACO,EAAL,CAASxE,GAAG,CAACiE,GAAG,CAACO,EAAL,CAAS7D,QAAQ,CAACqD,EAAD,CAAKK,EAAL,CAASa,GAAT,CAAjB,CAAZ,CAAR,CAFF,CAAP,CAID,CAED,QAASC,CAAAA,cAAT,CAAwB1C,MAAxB,CAAqCwB,GAArC,CAA+CmB,IAA/C,CAA8E,IAApBC,CAAAA,MAAoB,2DAAH,CAAG,CAC5E,GAAMC,CAAAA,MAAc,CAAG,EAAvB,CACA,GAAMC,CAAAA,MAAc,CAAG,EAAvB,CACA,GAAMC,CAAAA,KAAK,CAAG3E,GAAG,CAACoD,GAAG,CAACM,EAAL,CAAS5D,QAAQ,CAAC,CAAC,CAAF,CAAKsD,GAAG,CAACM,EAAT,CAAac,MAAb,CAAjB,CAAjB,CACA,GAAMI,CAAAA,KAAK,CAAG5E,GAAG,CAACoD,GAAG,CAACO,EAAL,CAAS7D,QAAQ,CAAC,CAAC,CAAF,CAAKsD,GAAG,CAACO,EAAT,CAAaa,MAAb,CAAjB,CAAjB,CACA,GAAID,IAAI,CAACjD,IAAL,GAAcuB,SAAlB,CAA6B,CAC3B4B,MAAM,CAACI,IAAP,CAAYzF,IAAI,CAACO,GAAG,CAACJ,EAAE,CAACqC,MAAM,CAACV,CAAR,CAAWqD,IAAI,CAACjD,IAAhB,CAAH,CAA0B5B,QAAQ,CAAC0D,GAAG,CAACM,EAAL,CAAS,CAAT,CAAlC,CAAJ,CAAoDiB,KAApD,CAAhB,EACD,CACD,GAAIJ,IAAI,CAAChD,KAAL,GAAesB,SAAnB,CAA8B,CAC5B4B,MAAM,CAACI,IAAP,CACEzF,IAAI,CAACO,GAAG,CAACJ,EAAE,CAACqC,MAAM,CAACV,CAAR,CAAWqD,IAAI,CAAChD,KAAhB,CAAH,CAA2B7B,QAAQ,CAAC,CAAD,CAAI0D,GAAG,CAACM,EAAR,CAAnC,CAAJ,CAAqDiB,KAArD,CADN,EAGD,CACD,GAAIJ,IAAI,CAAC/C,GAAL,GAAaqB,SAAjB,CAA4B,CAC1B4B,MAAM,CAACI,IAAP,CAAYzF,IAAI,CAACO,GAAG,CAACJ,EAAE,CAACqC,MAAM,CAACH,CAAR,CAAW8C,IAAI,CAAC/C,GAAhB,CAAH,CAAyB9B,QAAQ,CAAC0D,GAAG,CAACO,EAAL,CAAS,CAAT,CAAjC,CAAJ,CAAmDiB,KAAnD,CAAhB,EACD,CACD,GAAIL,IAAI,CAAC7C,MAAL,GAAgBmB,SAApB,CAA+B,CAC7B4B,MAAM,CAACI,IAAP,CACEzF,IAAI,CAACO,GAAG,CAACJ,EAAE,CAACqC,MAAM,CAACH,CAAR,CAAW8C,IAAI,CAAC7C,MAAhB,CAAH,CAA4BhC,QAAQ,CAAC,CAAD,CAAI0D,GAAG,CAACO,EAAR,CAApC,CAAJ,CAAsDiB,KAAtD,CADN,EAGD,CACD,MAAO,CACL1D,CAAC,CAAEuD,MADE,CAELhD,CAAC,CAAEiD,MAFE,CAAP,CAID,CAED,QAASI,CAAAA,aAAT,CAAuBP,IAAvB,CAAkC3C,MAAlC,CAA+CmD,QAA/C,CAA8D,CAC5D,GAAI,CAACR,IAAL,CAAW,CACT,MAAOQ,CAAAA,QAAP,CACD,CACD,GAAMC,CAAAA,QAAQ,CAAGT,IAAI,CAACjD,IAAL,GAAcuB,SAAd,EAA2BzC,QAAQ,CAACmE,IAAI,CAACjD,IAAN,CAAYM,MAAM,CAACV,CAAnB,CAApD,CACA,GAAM+D,CAAAA,SAAS,CAAGV,IAAI,CAAChD,KAAL,GAAesB,SAAf,EAA4BzC,QAAQ,CAACwB,MAAM,CAACV,CAAR,CAAWqD,IAAI,CAAChD,KAAhB,CAAtD,CACA,GAAM2D,CAAAA,OAAO,CAAGX,IAAI,CAAC/C,GAAL,GAAaqB,SAAb,EAA0BzC,QAAQ,CAACmE,IAAI,CAAC/C,GAAN,CAAWI,MAAM,CAACH,CAAlB,CAAlD,CACA,GAAM0D,CAAAA,UAAU,CAAGZ,IAAI,CAAC7C,MAAL,GAAgBmB,SAAhB,EAA6BzC,QAAQ,CAACwB,MAAM,CAACH,CAAR,CAAW8C,IAAI,CAAC7C,MAAhB,CAAxD,CACA,GAAM0D,CAAAA,SAAgB,CAAG,CAACJ,QAAD,CAAWC,SAAX,CAAsBC,OAAtB,CAA+BC,UAA/B,EAA2CE,MAA3C,CACvB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,GAAK,IAAV,EADsB,CAAzB,CAGA,GAAMC,CAAAA,IAAI,CAAG5F,GAAG,MAAH,SAAIyF,SAAS,CAAC,CAAD,CAAb,CAAkBA,SAAS,CAAC,CAAD,CAA3B,4BAAmCA,SAAS,CAACI,KAAV,CAAgB,CAAhB,CAAnC,GAAb,CACA,MAAO,CACLtE,CAAC,CAAE9B,IAAI,CAACmG,IAAD,CAAOR,QAAQ,CAAC7D,CAAhB,CADF,CAELO,CAAC,CAAErC,IAAI,CAACmG,IAAD,CAAOR,QAAQ,CAACtD,CAAhB,CAFF,CAAP,CAID,CAED,QAASgE,CAAAA,UAAT,CAAoBC,KAApB,CAAgCC,UAAhC,CAAiDC,UAAjD,CAAkE,CAChE,GAAIC,CAAAA,MAAM,CAAGH,KAAb,CACA,GAAIC,UAAU,GAAK9C,SAAnB,CAA8B,CAC5BgD,MAAM,CAAGzG,IAAI,CAACM,QAAQ,CAACgG,KAAD,CAAQC,UAAR,CAAT,CAA8BA,UAA9B,CAA0CE,MAA1C,CAAb,CACD,CACD,GAAID,UAAU,GAAK/C,SAAnB,CAA8B,CAC5BgD,MAAM,CAAGzG,IAAI,CAACM,QAAQ,CAACkG,UAAD,CAAaF,KAAb,CAAT,CAA8BE,UAA9B,CAA0CC,MAA1C,CAAb,CACD,CACD,MAAOA,CAAAA,MAAP,CACD,C,GAwEoBC,CAAAA,Y,6EAmCnB,sBAAYC,KAAZ,CAAsC,8CACpC,8EAAMA,KAAN,GAEA,GAAMC,CAAAA,OAAO,CAAG,CAAE9E,CAAC,CAAE,GAAIR,CAAAA,KAAJ,CAAU,CAAV,CAAL,CAAmBe,CAAC,CAAE,GAAIf,CAAAA,KAAJ,CAAU,CAAV,CAAtB,CAAhB,CACA,GAAMuC,CAAAA,KAAK,CAAG,GAAIvC,CAAAA,KAAJ,CAAU,CAAC,CAAX,CAAd,CAEA,MAAKuF,cAAL,CAAsBzG,KAAK,CAAC,CAC1B,CACEsD,WAAW,CAAE,CACXoD,YAAY,CAAEF,OAAO,CAAC9E,CADX,CAEXiF,YAAY,CAAEH,OAAO,CAACvE,CAFX,CAGXwB,KAAK,CAALA,KAHW,CADf,CAD0B,CAAD,CAA3B,CAUA,GAAMrB,CAAAA,MAAM,CAAG,CACbV,CAAC,CAAE,GAAIR,CAAAA,KAAJ,CAAUqF,KAAK,CAACK,eAAN,CAAsBlF,CAAtB,EAA2B,CAArC,CADU,CAEbO,CAAC,CAAE,GAAIf,CAAAA,KAAJ,CAAUqF,KAAK,CAACK,eAAN,CAAsB3E,CAAtB,EAA2B,CAArC,CAFU,CAAf,CAKA,GAAM4E,CAAAA,MAAM,CAAG,CACbnF,CAAC,CAAE6E,KAAK,CAACO,cADI,CAEb7E,CAAC,CAAEsE,KAAK,CAACQ,cAFI,CAAf,CAKA,GAAMC,CAAAA,KAAK,CAAG,GAAI/F,CAAAA,KAAJ,EAAd,CAEA,GAAM0C,CAAAA,EAAE,CAAG7D,MAAM,CAACD,IAAI,CAACmH,KAAD,CAAL,CAAc,IAAd,CAAjB,CAEA,GAAMpD,CAAAA,GAAG,CAAG,CACVM,EAAE,CAAE,GAAIhD,CAAAA,KAAJ,CAAU,CAAV,CADM,CAEViD,EAAE,CAAE,GAAIjD,CAAAA,KAAJ,CAAU,CAAV,CAFM,CAGV6C,IAAI,CAAE,CAHI,CAAZ,CAMA,GAAMkD,CAAAA,YAAY,CAAG,CACnBvF,CAAC,CAAE/B,GAAG,CAACyC,MAAM,CAACV,CAAR,CAAWpB,QAAQ,CAACiG,KAAK,CAACW,QAAP,CAAiBtD,GAAG,CAACM,EAArB,CAAnB,CADa,CAEnBjC,CAAC,CAAEtC,GAAG,CAACyC,MAAM,CAACH,CAAR,CAAW3B,QAAQ,CAACiG,KAAK,CAACW,QAAP,CAAiBtD,GAAG,CAACO,EAArB,CAAnB,CAFa,CAArB,CAKA,GAAMgD,CAAAA,WAAkC,CAAG,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAA3C,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACvF,MAAD,CAAce,OAAd,CAA4ByE,SAA5B,CAA2E,IAA/BC,CAAAA,OAA+B,2DAAhBH,WAAgB,CAC3FG,OAAO,CAAC,CAAD,CAAP,CAAWjC,IAAX,CACEC,aAAa,CACX+B,SADW,CAEXjF,MAFW,CAGXsB,cAAc,CAACC,EAAD,CAAKvB,MAAL,CAAawB,GAAb,CAAkB/B,MAAlB,CAA0Be,OAA1B,CAHH,CADf,EAOD,CARD,CAUA,GAAM2E,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAC1E,OAAD,CAAewE,SAAf,CAA8D,IAA/BC,CAAAA,OAA+B,2DAAhBH,WAAgB,CAChFG,OAAO,CAAC,CAAD,CAAP,CAAWjC,IAAX,CACEC,aAAa,CACX+B,SADW,CAEXjF,MAFW,CAGXgC,gBAAgB,CAACT,EAAD,CAAKC,GAAL,CAAUf,OAAV,CAHL,CADf,EAOD,CARD,CAUA,GAAM2E,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CACjB3F,MADiB,CAEjB2C,QAFiB,CAGjBC,OAHiB,CAIjB4C,SAJiB,CAMd,IADHC,CAAAA,OACG,2DADYH,WACZ,CACHG,OAAO,CAAC,CAAD,CAAP,CAAWjC,IAAX,CACEC,aAAa,CACX+B,SADW,CAEXjF,MAFW,CAGXmC,eAAe,CAACZ,EAAD,CAAKvB,MAAL,CAAawB,GAAb,CAAkB/B,MAAlB,CAA0B2C,QAA1B,CAAoCC,OAApC,CAHJ,CADf,EAOD,CAdD,CAgBA,GAAMgD,CAAAA,UAAU,CAAG,CAAE/F,CAAC,CAAE,GAAIR,CAAAA,KAAJ,CAAU,CAAV,CAAL,CAAmBe,CAAC,CAAE,GAAIf,CAAAA,KAAJ,CAAU,CAAV,CAAtB,CAAnB,CACA,GAAMwG,CAAAA,WAAkC,CAAG,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAA3C,CACA,GAAInB,KAAK,CAACoB,cAAV,CAA0B,2BACKpB,KAAK,CAACoB,cADX,CAChB/E,OADgB,uBAChBA,OADgB,CACPC,OADO,uBACPA,OADO,CAExBuE,SAAS,CAACK,UAAD,CAAa7E,OAAb,CAAsB,IAAtB,CAA4B8E,WAA5B,CAAT,CACAH,WAAW,CAAC1E,OAAD,CAAU,IAAV,CAAgB6E,WAAhB,CAAX,CACD,CAJD,IAIO,CACLA,WAAW,CAAC,CAAD,CAAX,CAAerC,IAAf,CAAoBf,cAAc,CAACX,EAAD,CAAKvB,MAAL,CAAawB,GAAb,CAAkB6D,UAAlB,CAAlC,EACD,CAED,GAAMG,CAAAA,eAAe,CAAGrB,KAAK,CAACsB,MAAN,EACnBzH,IAAI,CACL,CAACgC,MAAM,CAACV,CAAR,CAAWU,MAAM,CAACH,CAAlB,CADK,CAEL,kDAAEP,CAAF,UAAKO,CAAL,gBAAYsE,CAAAA,KAAK,CAACsB,MAAN,EAAgBtB,KAAK,CAACsB,MAAN,CAAa,CAAEvE,WAAW,CAAE,CAAE5B,CAAC,CAADA,CAAF,CAAKO,CAAC,CAADA,CAAL,CAAQwB,KAAK,CAAE,OAAf,CAAf,CAAb,CAA5B,EAFK,CADT,CAMA,GAAMqE,CAAAA,WAAkC,CAAG,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAA3C,CACA,GAAMC,CAAAA,UAAU,CAAG,CACjBrG,CAAC,CAAE,GAAIR,CAAAA,KAAJ,CAAUqF,KAAK,CAACK,eAAN,CAAsBlF,CAAtB,EAA2B,CAArC,CADc,CAEjBO,CAAC,CAAE,GAAIf,CAAAA,KAAJ,CAAUqF,KAAK,CAACK,eAAN,CAAsB3E,CAAtB,EAA2B,CAArC,CAFc,CAGjBW,OAAO,CAAE,GAAI1B,CAAAA,KAAJ,CAAUG,oBAAV,CAHQ,CAIjBwB,OAAO,CAAE,GAAI3B,CAAAA,KAAJ,CAAUI,oBAAV,CAJQ,CAAnB,CAMA,GAAM0G,CAAAA,YAAY,CAAG7F,MAAM,CACzB8E,YADyB,CAEzBV,KAAK,CAAClE,UAFmB,CAGzB0F,UAHyB,CAIzBxB,KAAK,CAAC0B,MAJmB,CAKzB1B,KAAK,CAACsB,MALmB,CAA3B,CAQAT,SAAS,CAACW,UAAD,CAAaA,UAAU,CAACnF,OAAxB,CAAiC,IAAjC,CAAuCkF,WAAvC,CAAT,CACAP,WAAW,CAACQ,UAAU,CAAClF,OAAZ,CAAqB,IAArB,CAA2BiF,WAA3B,CAAX,CAEA,GAAIvB,KAAK,CAAC2B,YAAV,CAAwB,CACtB3B,KAAK,CAAC2B,YAAN,CAAmB/E,OAAnB,CAA2B,SAACR,EAAD,CAAa,CACtCyE,SAAS,CAACzE,EAAD,CAAKA,EAAE,CAACC,OAAR,CAAiBD,EAAE,CAACwF,aAApB,CAAT,CACA,GAAIxF,EAAE,CAACE,OAAP,CAAgB,CACd0E,WAAW,CAAC5E,EAAE,CAACE,OAAJ,CAAaF,EAAE,CAACwF,aAAhB,CAAX,CACD,CACF,CALD,EAMD,CACD,GAAI5B,KAAK,CAAC6B,aAAV,CAAyB,CACvB7B,KAAK,CAAC6B,aAAN,CAAoBjF,OAApB,CAA4B,SAACR,EAAD,CAAQ,CAClC,GAAM8B,CAAAA,OAAO,CAAG9B,EAAE,CAAC8B,OAAH,EAAcjD,sBAA9B,CACAgG,UAAU,CAAC7E,EAAD,CAAKA,EAAE,CAAC6B,QAAR,CAAkBC,OAAlB,CAA2B9B,EAAE,CAACwF,aAA9B,CAAV,CACA,GAAIxF,EAAE,CAACE,OAAP,CAAgB,CACd,GAAMsF,CAAAA,aAAa,CAAGxF,EAAE,CAACwF,aAAH,EAAoBxG,uBAAuB,CAAC,IAAM8C,OAAP,CAAgB9B,EAAhB,CAAjE,CACA4E,WAAW,CAAC5E,EAAE,CAACE,OAAJ,CAAasF,aAAb,CAAX,CACD,CACF,CAPD,EAQD,CACD,GAAI5B,KAAK,CAAC8B,aAAV,CAAyB,CACvB9B,KAAK,CAAC8B,aAAN,CAAoBlF,OAApB,CAA4B,SAACR,EAAD,CAAa,CACvC4E,WAAW,CAAC5E,EAAE,CAACE,OAAJ,CAAaF,EAAE,CAACwF,aAAhB,CAAX,CACD,CAFD,EAGD,CACD,GAAI5B,KAAK,CAAC+B,UAAV,CAAsB,CACpBR,WAAW,CAAC,CAAD,CAAX,CAAezC,IAAf,CACEP,cAAc,CACZ1C,MADY,CAEZwB,GAFY,CAGZ2C,KAAK,CAAC+B,UAHM,CAIZ/B,KAAK,CAAC+B,UAAN,CAAiBtD,MAJL,CADhB,EAQD,CAKD,GAAMuD,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,cAAD,QAA0B,CAC5C9G,CAAC,CAAE8G,cAAc,CACdzF,GADA,CACI,SAAC0F,CAAD,CAASC,GAAT,QAAyB,6BAAIvB,WAAW,CAACuB,GAAD,CAAf,qBAAyBD,CAAzB,GAA4BE,OAA5B,GAAsC5F,GAAtC,CAA0C,SAAA6F,EAAE,QAAIA,CAAAA,EAAE,CAAClH,CAAP,EAA5C,CAAzB,EADJ,EAEAmH,MAFA,CAEO,SAACC,GAAD,CAAWC,EAAX,QAAuBD,CAAAA,GAAG,CAACE,MAAJ,CAAWD,EAAX,CAAvB,EAFP,CAE8C,EAF9C,CADyC,CAI5C9G,CAAC,CAAEuG,cAAc,CACdzF,GADA,CACI,SAAC0F,CAAD,CAASC,GAAT,QAAyB,6BAAIvB,WAAW,CAACuB,GAAD,CAAf,qBAAyBD,CAAzB,GAA4BE,OAA5B,GAAsC5F,GAAtC,CAA0C,SAAA6F,EAAE,QAAIA,CAAAA,EAAE,CAAC3G,CAAP,EAA5C,CAAzB,EADJ,EAEA4G,MAFA,CAEO,SAACC,GAAD,CAAWC,EAAX,QAAuBD,CAAAA,GAAG,CAACE,MAAJ,CAAWD,EAAX,CAAvB,EAFP,CAE8C,EAF9C,CAJyC,CAA1B,EAApB,CAQA,GAAME,CAAAA,aAAa,CAAGV,WAAW,CAACb,WAAD,CAAjC,CACA,GAAMwB,CAAAA,aAAa,CAAGX,WAAW,CAACT,WAAD,CAAjC,CAEA,GAAMqB,CAAAA,gBAAgB,CAAG,CACvBzH,CAAC,CAAE,GAAIR,CAAAA,KAAJ,CACDqF,KAAK,CAAC6C,YAAN,CAAqBjI,iCAAiC,CAAG,CAAzD,CAA6D,CAD5D,CADoB,CAIvBc,CAAC,CAAE,GAAIf,CAAAA,KAAJ,CACDqF,KAAK,CAAC8C,cAAN,CAAuBlI,iCAAiC,CAAG,CAA3D,CAA+D,CAD9D,CAJoB,CAAzB,CASA,GAAMmI,CAAAA,cAAc,CAAG1J,IAAI,CACzBO,GAAG,CACDQ,WAAW,CAACwI,gBAAgB,CAACzH,CAAlB,CAAqBP,iCAArB,CADV,CAEDR,WAAW,CAACwI,gBAAgB,CAAClH,CAAlB,CAAqBd,iCAArB,CAFV,CADsB,CAKzBd,KAAK,CAAC,CACJkG,KAAK,CAACgD,MAAN,CACI3J,IAAI,CACJc,YAAY,CAACsG,KAAD,CADR,CAEJ5G,IAAI,CAAC,CAACgC,MAAM,CAACV,CAAR,CAAWU,MAAM,CAACH,CAAlB,CAAD,CAAuB,kDAAEP,CAAF,UAAKO,CAAL,gBAAYsE,CAAAA,KAAK,CAACgD,MAAN,EAAgBhD,KAAK,CAACgD,MAAN,CAAa,CAAEjG,WAAW,CAAE,CAAE5B,CAAC,CAADA,CAAF,CAAKO,CAAC,CAADA,CAAL,CAAf,CAAb,CAA5B,EAAvB,CAFA,CADR,CAIM,EALF,CAMJlB,SAAS,CAACiG,KAAD,CANL,CAAD,CALoB,CAazBlG,UAAU,CAACkG,KAAD,CAbe,CAA3B,CAgBA,GAAMwC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CACZC,IADY,CACKC,KADL,CAEZvD,UAFY,CAGZC,UAHY,CAIT,CACH,GAAMuD,CAAAA,QAAQ,CAAG,GAAIzI,CAAAA,KAAJ,CAAU,CAAV,CAAjB,CACA,GAAM0I,CAAAA,KAAK,CAAG,GAAI1I,CAAAA,KAAJ,CAAU,CAAV,CAAd,CACA,GAAMQ,CAAAA,CAAC,CAAGU,MAAM,CAACqH,IAAD,CAAhB,CACA,GAAMvF,CAAAA,EAAE,CAAGN,GAAG,CAAC8F,KAAD,CAAd,CACA,GAAM7H,CAAAA,MAAM,CAAG4F,UAAU,CAACgC,IAAD,CAAzB,CACA,GAAMI,CAAAA,IAAI,CAAGrD,OAAO,CAACiD,IAAD,CAApB,CACA,GAAIK,CAAAA,OAAO,CAAGlK,IAAI,CAChBM,QAAQ,CAACO,GAAG,CAACyD,EAAD,CAAJ,CAAU9C,4BAAV,CADQ,CAEhBM,CAFgB,CAGhB/B,GAAG,CAAC+B,CAAD,CAAIpB,QAAQ,CAAC4D,EAAD,CAAKP,EAAL,CAAZ,CAHa,CAAlB,CAKA,GAAI4C,KAAK,CAAC+B,UAAV,CAAsB,CACpBwB,OAAO,CAAG7D,UAAU,CAClB6D,OADkB,CAElBvD,KAAK,CAAC+B,UAAN,CAAiBnC,UAAjB,CAFkB,CAGlBI,KAAK,CAAC+B,UAAN,CAAiBlC,UAAjB,CAHkB,CAApB,CAKD,CACD,GAAM2D,CAAAA,IAAI,CAAG,GAAI7I,CAAAA,KAAJ,CAAU8I,MAAM,CAACC,gBAAjB,CAAb,CACA,GAAMC,CAAAA,gBAAgB,CAAGf,gBAAgB,CAACM,IAAD,CAAzC,CACA,GAAMU,CAAAA,kBAAkB,CAAGvK,IAAI,CAC7BG,EAAE,CAAC+J,OAAD,CAAUC,IAAV,CAD2B,CAE7BvJ,GAAG,CAAC0J,gBAAD,CAAmBvK,GAAG,CAACuK,gBAAD,CAAmB,CAAnB,CAAtB,CAF0B,CAG7B,CAAC1J,GAAG,CAACuJ,IAAD,CAAOD,OAAP,CAAJ,CAAqBtJ,GAAG,CAAC0J,gBAAD,CAAmB,CAAnB,CAAxB,CAH6B,CAA/B,CAKA,GAAME,CAAAA,IAAI,CAAGxK,IAAI,CACfG,EAAE,CAAC0D,KAAD,CAAQ/D,KAAK,CAAC2K,MAAd,CADa,CAEf,CACEzK,IAAI,CAAC+J,QAAD,CAAW,CAAX,CAActJ,KAAK,CAAC,CACtBuH,eAAe,EAAI,EADG,CAEtB9G,UAAU,CAACkG,KAAD,CAFY,CAGtBxG,GAAG,CAACmJ,QAAD,CAAW,CAAX,CAHmB,CAItBnJ,GAAG,CAACoJ,KAAD,CAAQlI,CAAR,CAJmB,CAAD,CAAnB,CADN,CAOElB,GAAG,CAACqB,MAAD,CAASlC,GAAG,CAACiK,KAAD,CAAQC,IAAR,CAAZ,CAPL,CAQEjK,IAAI,CAAC+D,EAAD,CAAKsF,aAAa,CAACQ,IAAD,CAAlB,CARN,CAFe,CAYf,CACE7J,IAAI,CAACc,YAAY,CAACsG,KAAD,CAAb,CAAsB,CAAtB,CAAyBlG,UAAU,CAACkG,KAAD,CAAnC,CADN,CAEEpH,IAAI,CAAC+J,QAAD,CAAW,CAAC3B,YAAD,CAAexH,GAAG,CAACmJ,QAAD,CAAW,CAAX,CAAlB,CAAX,CAFN,CAGE/J,IAAI,CAAC+D,EAAD,CAAKuF,aAAa,CAACO,IAAD,CAAlB,CAHN,CAIEU,kBAJF,CAKEb,cALF,CAZe,CAAjB,CAoBA,GAAMgB,CAAAA,QAAQ,CAAG/D,KAAK,CAACgE,WAAN,CACb3K,IAAI,CAAC2G,KAAK,CAACgE,WAAP,CAA2BH,IAA3B,CAAiC,CAAC5J,GAAG,CAACmJ,QAAD,CAAW,CAAX,CAAJ,CAAmB5I,SAAS,CAACiG,KAAD,CAA5B,CAAjC,CADS,CAEboD,IAFJ,CAKA,MAAKT,QAAL,CAAcF,IAAd,EAAsBE,QAAtB,CACA,MAAKa,QAAL,CAAcf,IAAd,EAAsBvF,EAAtB,CAGA,GAAMuG,CAAAA,gBAAgB,CAAG5D,MAAM,CAAC4C,IAAD,CAAN,CAAejJ,GAAG,CAACqG,MAAM,CAAC4C,IAAD,CAAP,CAAe/H,CAAf,CAAlB,CAAsCA,CAA/D,CAEA,MAAOrB,CAAAA,KAAK,CAAC,CAACiK,QAAD,CAAW9J,GAAG,CAACkB,CAAD,CAAIoI,OAAJ,CAAd,CAA4BW,gBAA5B,CAAD,CAAZ,CACD,CA9DD,CAiEA,MAAKd,QAAL,CAAgB,EAAhB,CACA,MAAKa,QAAL,CAAgB,EAAhB,CACA,MAAKE,QAAL,CAAgBtI,MAAhB,CACA,MAAK2F,UAAL,CAAkBA,UAAlB,CAEA,MAAK4C,MAAL,CAAcnB,KAAK,CAAC,GAAD,CAAM,IAAN,CAAY,MAAZ,CAAoB,OAApB,CAAnB,CACA,MAAKoB,MAAL,CAAcpB,KAAK,CAAC,GAAD,CAAM,IAAN,CAAY,KAAZ,CAAmB,QAAnB,CAAnB,CAjQoC,aAkQrC,C,+EAGqE,IAAxD9H,CAAAA,CAAwD,OAAxDA,CAAwD,CAArDO,CAAqD,OAArDA,CAAqD,CACpE,GAAIP,CAAC,GAAK2B,SAAV,CAAqB,CACnB,KAAKsG,QAAL,CAAcjI,CAAd,CAAgBmJ,QAAhB,CAAyB,CAAzB,EACA,KAAKL,QAAL,CAAc9I,CAAd,CAAgBmJ,QAAhB,CAAyBnJ,CAAzB,EACD,CACD,GAAIO,CAAC,GAAKoB,SAAV,CAAqB,CACnB,KAAKsG,QAAL,CAAc1H,CAAd,CAAgB4I,QAAhB,CAAyB,CAAzB,EACA,KAAKL,QAAL,CAAcvI,CAAd,CAAgB4I,QAAhB,CAAyB5I,CAAzB,EACD,CACF,C,4CAEoC,IAA5BmB,CAAAA,KAA4B,OAA5BA,KAA4B,iBACJ,KAAKmD,KADD,CAC3BlE,UAD2B,aAC3BA,UAD2B,CACf4F,MADe,aACfA,MADe,CAEnC,GAAM6C,CAAAA,SAAS,CAAGzI,UAAU,CAACe,KAAD,CAA5B,CACA,KAAK2E,UAAL,CAAgBnF,OAAhB,CAAwBiI,QAAxB,CACEC,SAAS,CAAClI,OAAV,EAAqBvB,oBADvB,EAGA,KAAK0G,UAAL,CAAgBlF,OAAhB,CAAwBgI,QAAxB,CACEC,SAAS,CAACjI,OAAV,EAAqBvB,oBADvB,EAGA,KAAKyG,UAAL,CAAgBrG,CAAhB,CAAkBmJ,QAAlB,CAA2BC,SAAS,CAACpJ,CAAV,EAAe,CAA1C,EACA,KAAKqG,UAAL,CAAgB9F,CAAhB,CAAkB4I,QAAlB,CAA2BC,SAAS,CAAC7I,CAAV,EAAe,CAA1C,EACA,GAAIgG,MAAJ,CAAY,CACVA,MAAM,CAAC,CAAE3E,WAAW,kBAAOwH,SAAP,EAAkB1H,KAAK,CAALA,KAAlB,EAAb,CAAD,CAAN,CACD,CACF,C,4DAEuE,IAAvD1B,CAAAA,CAAuD,OAAvDA,CAAuD,CAApDO,CAAoD,OAApDA,CAAoD,CACtE,GAAIP,CAAC,GAAK2B,SAAV,CAAqB,CACnB,KAAKsG,QAAL,CAAcjI,CAAd,CAAgBmJ,QAAhB,CAAyB,CAAzB,EACA,KAAKH,QAAL,CAAchJ,CAAd,CAAgBmJ,QAAhB,CAAyBnJ,CAAzB,EACD,CACD,GAAIO,CAAC,GAAKoB,SAAV,CAAqB,CACnB,KAAKsG,QAAL,CAAcjI,CAAd,CAAgBmJ,QAAhB,CAAyB,CAAzB,EACA,KAAKH,QAAL,CAAczI,CAAd,CAAgB4I,QAAhB,CAAyB5I,CAAzB,EACD,CACF,C,uCAEQ,IACCwE,CAAAA,cADD,CACoB,IADpB,CACCA,cADD,kBAIH,KAAKF,KAJF,CAGLwE,QAHK,cAGLA,QAHK,CAGKC,KAHL,cAGKA,KAHL,CAGY3B,cAHZ,cAGYA,cAHZ,CAG4BD,YAH5B,cAG4BA,YAH5B,CAGuD6B,OAHvD,cAG0CV,WAH1C,CAKP,MACE,qBAAC,iBAAD,WACE,WAAW,CAAE,CADf,CAEE,oBAAoB,CAAE9D,cAFxB,EAGM,CAAEA,cAAc,CAAdA,cAAF,CAAkBwE,OAAO,CAAPA,OAAlB,CAHN,oDAKE,oBAAC,QAAD,CAAU,IAAV,EACE,KAAK,CAAE,CACLD,KADK,CAEL,CACEE,SAAS,CAAE,CACT,CACEC,UAAU,CAAE/B,YAAY,CAAG,CAAH,CAAO,KAAKuB,MADtC,CAEES,UAAU,CAAE/B,cAAc,CAAG,CAAH,CAAO,KAAKuB,MAFxC,CADS,CADb,CAFK,CADT,kDAaGG,QAbH,CALF,CADF,CAuBD,C,0BA1WuCxL,KAAK,CAAC8L,a,EAA3B/E,Y,CACZgF,Y,CAAe,CACpBpE,QAAQ,CAAE,GADU,CAEpBqD,WAAW,CAAE,IAFO,CAGpB3D,eAAe,CAAE,CAAElF,CAAC,CAAE,CAAL,CAAQO,CAAC,CAAE,CAAX,CAHG,C,QADHqE,Y","sourcesContent":["/* eslint-disable react/sort-comp */\nimport React from \"react\";\nimport Animated from \"react-native-reanimated\";\nimport { PanGestureHandler, State } from \"react-native-gesture-handler\";\nimport { StyleProp, ViewStyle } from \"react-native\";\n\nconst {\n  add,\n  cond,\n  diff,\n  divide,\n  eq,\n  event,\n  exp,\n  lessThan,\n  and,\n  call,\n  block,\n  multiply,\n  pow,\n  set,\n  abs,\n  clockRunning,\n  greaterOrEq,\n  lessOrEq,\n  sqrt,\n  startClock,\n  stopClock,\n  sub,\n  Clock,\n  Value,\n} = Animated;\n\nexport { add };\nexport type Node = ReturnType<typeof add>;\nexport type Adaptable<T> = Node | T;\n\nconst ANIMATOR_PAUSE_CONSECUTIVE_FRAMES = 10;\nconst ANIMATOR_PAUSE_ZERO_VELOCITY = 1;\nconst DEFAULT_SNAP_TENSION = 300;\nconst DEFAULT_SNAP_DAMPING = 0.7;\nconst DEFAULT_GRAVITY_STRENGTH = 400;\nconst DEFAULT_GRAVITY_FALLOF = 40;\n\nfunction sq(x: any) {\n  return multiply(x, x);\n}\n\nfunction influenceAreaWithRadius(radius: number, anchor: any) {\n  return {\n    left: (anchor.x || 0) - radius,\n    right: (anchor.x || 0) + radius,\n    top: (anchor.y || 0) - radius,\n    bottom: (anchor.y || 0) + radius,\n  };\n}\n\nfunction snapTo(target: any, snapPoints: any, best: any, clb: any, dragClb: any) {\n  const dist = new Value(0);\n  const snap = (pt: any) => [\n    set(best.tension, pt.tension || DEFAULT_SNAP_TENSION),\n    set(best.damping, pt.damping || DEFAULT_SNAP_DAMPING),\n    set(best.x, pt.x || 0),\n    set(best.y, pt.y || 0),\n  ];\n  const snapDist = (pt: any) => add(sq(sub(target.x, pt.x || 0)), sq(sub(target.y, pt.y || 0)));\n  return [\n    set(dist, snapDist(snapPoints[0])),\n    ...snap(snapPoints[0]),\n    ...snapPoints.map((pt: any) => {\n      const newDist = snapDist(pt);\n      return cond(lessThan(newDist, dist), [set(dist, newDist), ...snap(pt)]);\n    }),\n    (clb || dragClb)\n      && call([best.x, best.y, target.x, target.y], ([bx, by, x, y]) => {\n        snapPoints.forEach((pt: any, index: number) => {\n          if (\n            (pt.x === undefined || pt.x === bx)\n            && (pt.y === undefined || pt.y === by)\n          ) {\n            if (clb) {\n              clb({ nativeEvent: { ...pt, index } });\n            }\n            if (dragClb) {\n              dragClb({\n                nativeEvent: {\n                  x, y, targetSnapPointId: pt.id, state: \"end\",\n                },\n              });\n            }\n          }\n        });\n      }),\n  ];\n}\n\nfunction springBehavior(dt: any, target: any, obj: any, anchor: any, tension: number = 300) {\n  const dx = sub(target.x, anchor.x);\n  const ax = divide(multiply(-1, tension, dx), obj.mass);\n  const dy = sub(target.y, anchor.y);\n  const ay = divide(multiply(-1, tension, dy), obj.mass);\n  return {\n    x: set(obj.vx, add(obj.vx, multiply(dt, ax))),\n    y: set(obj.vy, add(obj.vy, multiply(dt, ay))),\n  };\n}\n\nfunction frictionBehavior(dt: any, obj: any, damping: number = 0.7) {\n  const friction = pow(damping, multiply(60, dt));\n  return {\n    x: set(obj.vx, multiply(obj.vx, friction)),\n    y: set(obj.vy, multiply(obj.vy, friction)),\n  };\n}\n\nfunction anchorBehavior(dt: any, target: any, obj: any, anchor: any) {\n  const dx = sub(anchor.x, target.x);\n  const dy = sub(anchor.y, target.y);\n  return {\n    x: set(obj.vx, divide(dx, dt)),\n    y: set(obj.vy, divide(dy, dt)),\n  };\n}\n\nfunction gravityBehavior(\n  dt: any,\n  target: any,\n  obj: any,\n  anchor: any,\n  strength: number = DEFAULT_GRAVITY_STRENGTH,\n  falloff: number = DEFAULT_GRAVITY_FALLOF,\n) {\n  const dx = sub(target.x, anchor.x);\n  const dy = sub(target.y, anchor.y);\n  const drsq = add(sq(dx), sq(dy));\n  const dr = sqrt(drsq);\n  const a = divide(\n    multiply(-1, strength, dr, exp(divide(multiply(-0.5, drsq), sq(falloff)))),\n    obj.mass,\n  );\n  const div = divide(a, dr);\n  return {\n    x: cond(dr, set(obj.vx, add(obj.vx, multiply(dt, dx, div)))),\n    y: cond(dr, set(obj.vy, add(obj.vy, multiply(dt, dy, div)))),\n  };\n}\n\nfunction bounceBehavior(target: any, obj: any, area: any, bounce: number = 0) {\n  const xnodes: Node[] = [];\n  const ynodes: Node[] = [];\n  const flipx = set(obj.vx, multiply(-1, obj.vx, bounce));\n  const flipy = set(obj.vy, multiply(-1, obj.vy, bounce));\n  if (area.left !== undefined) {\n    xnodes.push(cond(and(eq(target.x, area.left), lessThan(obj.vx, 0)), flipx));\n  }\n  if (area.right !== undefined) {\n    xnodes.push(\n      cond(and(eq(target.x, area.right), lessThan(0, obj.vx)), flipx),\n    );\n  }\n  if (area.top !== undefined) {\n    xnodes.push(cond(and(eq(target.y, area.top), lessThan(obj.vy, 0)), flipy));\n  }\n  if (area.bottom !== undefined) {\n    xnodes.push(\n      cond(and(eq(target.y, area.bottom), lessThan(0, obj.vy)), flipy),\n    );\n  }\n  return {\n    x: xnodes,\n    y: ynodes,\n  };\n}\n\nfunction withInfluence(area: any, target: any, behavior: any) {\n  if (!area) {\n    return behavior;\n  }\n  const testLeft = area.left === undefined || lessOrEq(area.left, target.x);\n  const testRight = area.right === undefined || lessOrEq(target.x, area.right);\n  const testTop = area.top === undefined || lessOrEq(area.top, target.y);\n  const testBottom = area.bottom === undefined || lessOrEq(target.y, area.bottom);\n  const testNodes: any[] = [testLeft, testRight, testTop, testBottom].filter(\n    t => t !== true,\n  );\n  const test = and(testNodes[0], testNodes[1], ...testNodes.slice(2));\n  return {\n    x: cond(test, behavior.x),\n    y: cond(test, behavior.y),\n  };\n}\n\nfunction withLimits(value: any, lowerBound: any, upperBound: any) {\n  let result = value;\n  if (lowerBound !== undefined) {\n    result = cond(lessThan(value, lowerBound), lowerBound, result);\n  }\n  if (upperBound !== undefined) {\n    result = cond(lessThan(upperBound, value), upperBound, result);\n  }\n  return result;\n}\n\ninterface SnapPoint {\n  x?: number;\n  y?: number;\n  damping?: number;\n  tension?: number;\n  id?: string;\n}\n\ninterface InfluenceArea {\n  left?: number;\n  right?: number;\n  top?: number;\n  bottom?: number;\n}\n\ninterface SpringPoint {\n  x?: number;\n  y?: number;\n  tension?: number;\n  damping?: number;\n  influenceArea?: InfluenceArea;\n}\n\ninterface GravityPoint {\n  x?: number;\n  y?: number;\n  strength?: number;\n  falloff?: number;\n  damping?: number;\n  influenceArea?: InfluenceArea;\n}\n\ninterface FrictionArea {\n  damping?: number;\n  influenceArea?: InfluenceArea;\n}\n\ninterface Position {\n  x: number;\n  y: number;\n}\n\ninterface Boundaries {\n  left?: number;\n  right?: number;\n  top?: number;\n  bottom?: number;\n  bounce?: number;\n}\n\ninterface InteractableProps {\n  snapPoints: SnapPoint[];\n  springPoints?: SpringPoint[];\n  gravityPoints?: GravityPoint[];\n  frictionAreas?: FrictionArea[];\n  horizontalOnly?: boolean;\n  verticalOnly?: boolean;\n  animatedValueX?: any;\n  animatedValueY?: any;\n  style?: StyleProp<ViewStyle>;\n  dragEnabled: boolean;\n  onSnap?: (e: { nativeEvent: SnapPoint & { index: number } }) => void;\n  onStop?: (e: { nativeEvent: { x: number, y: number } }) => void;\n  onDrag?: (e: { nativeEvent: { x: number, y: number, state: \"start\" | \"end\" } }) => void;\n  initialPosition: Position;\n  dragToss: number;\n  dragWithSpring?: {tension: number, damping: number};\n  boundaries?: Boundaries;\n}\n\nexport default class Interactable extends React.PureComponent<InteractableProps> {\n  static defaultProps = {\n    dragToss: 0.1,\n    dragEnabled: true,\n    initialPosition: { x: 0, y: 0 },\n  };\n\n  transY: any;\n\n  transX: any;\n\n  onGestureEvent: any;\n\n  position: {\n    x: any,\n    y: any\n  };\n\n  dragging: {\n    x?: any,\n    y?: any\n  };\n\n  snapAnchor: {\n    x: any,\n    y: any,\n    tension: any,\n    damping: any\n  };\n\n  velocity: {\n    x?: any,\n    y?: any\n  }\n\n  constructor(props: InteractableProps) {\n    super(props);\n\n    const gesture = { x: new Value(0), y: new Value(0) };\n    const state = new Value(-1);\n\n    this.onGestureEvent = event([\n      {\n        nativeEvent: {\n          translationX: gesture.x,\n          translationY: gesture.y,\n          state,\n        },\n      },\n    ]);\n\n    const target = {\n      x: new Value(props.initialPosition.x || 0),\n      y: new Value(props.initialPosition.y || 0),\n    };\n\n    const update = {\n      x: props.animatedValueX,\n      y: props.animatedValueY,\n    };\n\n    const clock = new Clock();\n\n    const dt = divide(diff(clock), 1000);\n\n    const obj = {\n      vx: new Value(0),\n      vy: new Value(0),\n      mass: 1,\n    };\n\n    const tossedTarget = {\n      x: add(target.x, multiply(props.dragToss, obj.vx)),\n      y: add(target.y, multiply(props.dragToss, obj.vy)),\n    };\n\n    const permBuckets: [any[], any[], any[]] = [[], [], []];\n\n    const addSpring = (anchor: any, tension: any, influence: any, buckets: any = permBuckets) => {\n      buckets[0].push(\n        withInfluence(\n          influence,\n          target,\n          springBehavior(dt, target, obj, anchor, tension),\n        ),\n      );\n    };\n\n    const addFriction = (damping: any, influence: any, buckets: any = permBuckets) => {\n      buckets[1].push(\n        withInfluence(\n          influence,\n          target,\n          frictionBehavior(dt, obj, damping),\n        ),\n      );\n    };\n\n    const addGravity = (\n      anchor: any,\n      strength: any,\n      falloff: any,\n      influence: any,\n      buckets: any = permBuckets,\n    ) => {\n      buckets[0].push(\n        withInfluence(\n          influence,\n          target,\n          gravityBehavior(dt, target, obj, anchor, strength, falloff),\n        ),\n      );\n    };\n\n    const dragAnchor = { x: new Value(0), y: new Value(0) };\n    const dragBuckets: [any[], any[], any[]] = [[], [], []];\n    if (props.dragWithSpring) {\n      const { tension, damping } = props.dragWithSpring;\n      addSpring(dragAnchor, tension, null, dragBuckets);\n      addFriction(damping, null, dragBuckets);\n    } else {\n      dragBuckets[0].push(anchorBehavior(dt, target, obj, dragAnchor));\n    }\n\n    const handleStartDrag = props.onDrag\n      && call(\n        [target.x, target.y],\n        ([x, y]) => props.onDrag && props.onDrag({ nativeEvent: { x, y, state: \"start\" } }),\n      );\n\n    const snapBuckets: [any[], any[], any[]] = [[], [], []];\n    const snapAnchor = {\n      x: new Value(props.initialPosition.x || 0),\n      y: new Value(props.initialPosition.y || 0),\n      tension: new Value(DEFAULT_SNAP_TENSION),\n      damping: new Value(DEFAULT_SNAP_DAMPING),\n    };\n    const updateSnapTo = snapTo(\n      tossedTarget,\n      props.snapPoints,\n      snapAnchor,\n      props.onSnap,\n      props.onDrag,\n    );\n\n    addSpring(snapAnchor, snapAnchor.tension, null, snapBuckets);\n    addFriction(snapAnchor.damping, null, snapBuckets);\n\n    if (props.springPoints) {\n      props.springPoints.forEach((pt: any) => {\n        addSpring(pt, pt.tension, pt.influenceArea);\n        if (pt.damping) {\n          addFriction(pt.damping, pt.influenceArea);\n        }\n      });\n    }\n    if (props.gravityPoints) {\n      props.gravityPoints.forEach((pt) => {\n        const falloff = pt.falloff || DEFAULT_GRAVITY_FALLOF;\n        addGravity(pt, pt.strength, falloff, pt.influenceArea);\n        if (pt.damping) {\n          const influenceArea = pt.influenceArea || influenceAreaWithRadius(1.4 * falloff, pt);\n          addFriction(pt.damping, influenceArea);\n        }\n      });\n    }\n    if (props.frictionAreas) {\n      props.frictionAreas.forEach((pt: any) => {\n        addFriction(pt.damping, pt.influenceArea);\n      });\n    }\n    if (props.boundaries) {\n      snapBuckets[0].push(\n        bounceBehavior(\n          target,\n          obj,\n          props.boundaries,\n          props.boundaries.bounce,\n        ),\n      );\n    }\n\n    // behaviors can go under one of three buckets depending on their priority\n    // we append to each bucket but in Interactable behaviors get added to the\n    // front, so we join in reverse order and then reverse the array.\n    const sortBuckets = (specialBuckets: any) => ({\n      x: specialBuckets\n        .map((b: any, idx: number) => [...permBuckets[idx], ...b].reverse().map(b1 => b1.x))\n        .reduce((acc: any, b2: any) => acc.concat(b2), []),\n      y: specialBuckets\n        .map((b: any, idx: number) => [...permBuckets[idx], ...b].reverse().map(b1 => b1.y))\n        .reduce((acc: any, b2: any) => acc.concat(b2), []),\n    });\n    const dragBehaviors = sortBuckets(dragBuckets);\n    const snapBehaviors = sortBuckets(snapBuckets);\n\n    const noMovementFrames = {\n      x: new Value(\n        props.verticalOnly ? ANIMATOR_PAUSE_CONSECUTIVE_FRAMES + 1 : 0,\n      ),\n      y: new Value(\n        props.horizontalOnly ? ANIMATOR_PAUSE_CONSECUTIVE_FRAMES + 1 : 0,\n      ),\n    };\n\n    const stopWhenNeeded = cond(\n      and(\n        greaterOrEq(noMovementFrames.x, ANIMATOR_PAUSE_CONSECUTIVE_FRAMES),\n        greaterOrEq(noMovementFrames.y, ANIMATOR_PAUSE_CONSECUTIVE_FRAMES),\n      ),\n      block([\n        props.onStop\n          ? cond(\n            clockRunning(clock),\n            call([target.x, target.y], ([x, y]) => props.onStop && props.onStop({ nativeEvent: { x, y } })),\n          ) : [],\n        stopClock(clock),\n      ]),\n      startClock(clock),\n    );\n\n    const trans = (\n      axis: \"x\" | \"y\", vaxis: \"vx\" | \"vy\",\n      lowerBound: \"top\" | \"left\" | \"right\" | \"bottom\",\n      upperBound: \"top\" | \"left\" | \"right\" | \"bottom\",\n    ) => {\n      const dragging = new Value(0);\n      const start = new Value(0);\n      const x = target[axis];\n      const vx = obj[vaxis];\n      const anchor = dragAnchor[axis];\n      const drag = gesture[axis];\n      let advance = cond(\n        lessThan(abs(vx), ANIMATOR_PAUSE_ZERO_VELOCITY),\n        x,\n        add(x, multiply(vx, dt)),\n      );\n      if (props.boundaries) {\n        advance = withLimits(\n          advance,\n          props.boundaries[lowerBound],\n          props.boundaries[upperBound],\n        );\n      }\n      const last = new Value(Number.MAX_SAFE_INTEGER);\n      const noMoveFrameCount = noMovementFrames[axis];\n      const testMovementFrames = cond(\n        eq(advance, last),\n        set(noMoveFrameCount, add(noMoveFrameCount, 1)),\n        [set(last, advance), set(noMoveFrameCount, 0)],\n      );\n      const step = cond(\n        eq(state, State.ACTIVE),\n        [\n          cond(dragging, 0, block([\n            handleStartDrag || [],\n            startClock(clock),\n            set(dragging, 1),\n            set(start, x),\n          ])),\n          set(anchor, add(start, drag)),\n          cond(dt, dragBehaviors[axis]),\n        ],\n        [\n          cond(clockRunning(clock), 0, startClock(clock)),\n          cond(dragging, [updateSnapTo, set(dragging, 0)]),\n          cond(dt, snapBehaviors[axis]),\n          testMovementFrames,\n          stopWhenNeeded,\n        ],\n      );\n      const wrapStep = props.dragEnabled\n        ? cond(props.dragEnabled as any, step, [set(dragging, 1), stopClock(clock)])\n        : step;\n\n      // export some values to be available for imperative commands\n      this.dragging[axis] = dragging;\n      this.velocity[axis] = vx;\n\n      // update animatedValueX/animatedValueY\n      const doUpdateAnReturn = update[axis] ? set(update[axis], x) : x;\n\n      return block([wrapStep, set(x, advance), doUpdateAnReturn]);\n    };\n\n    // variables to be used to access reanimated values from imperative commands\n    this.dragging = {};\n    this.velocity = {};\n    this.position = target;\n    this.snapAnchor = snapAnchor;\n\n    this.transX = trans(\"x\", \"vx\", \"left\", \"right\");\n    this.transY = trans(\"y\", \"vy\", \"top\", \"bottom\");\n  }\n\n  // imperative commands\n  setVelocity({ x, y }: { x: Adaptable<number>, y: Adaptable<number> }) {\n    if (x !== undefined) {\n      this.dragging.x.setValue(1);\n      this.velocity.x.setValue(x);\n    }\n    if (y !== undefined) {\n      this.dragging.y.setValue(1);\n      this.velocity.y.setValue(y);\n    }\n  }\n\n  snapTo({ index }: { index: number }) {\n    const { snapPoints, onSnap } = this.props;\n    const snapPoint = snapPoints[index];\n    this.snapAnchor.tension.setValue(\n      snapPoint.tension || DEFAULT_SNAP_TENSION,\n    );\n    this.snapAnchor.damping.setValue(\n      snapPoint.damping || DEFAULT_SNAP_DAMPING,\n    );\n    this.snapAnchor.x.setValue(snapPoint.x || 0);\n    this.snapAnchor.y.setValue(snapPoint.y || 0);\n    if (onSnap) {\n      onSnap({ nativeEvent: { ...snapPoint, index } });\n    }\n  }\n\n  changePosition({ x, y }: { x: Adaptable<number>, y: Adaptable<number>}) {\n    if (x !== undefined) {\n      this.dragging.x.setValue(1);\n      this.position.x.setValue(x);\n    }\n    if (y !== undefined) {\n      this.dragging.x.setValue(1);\n      this.position.y.setValue(y);\n    }\n  }\n\n  render() {\n    const { onGestureEvent } = this;\n    const {\n      children, style, horizontalOnly, verticalOnly, dragEnabled: enabled,\n    } = this.props;\n    return (\n      <PanGestureHandler\n        maxPointers={1}\n        onHandlerStateChange={onGestureEvent}\n        {...{ onGestureEvent, enabled }}\n      >\n        <Animated.View\n          style={[\n            style,\n            {\n              transform: [\n                {\n                  translateX: verticalOnly ? 0 : this.transX,\n                  translateY: horizontalOnly ? 0 : this.transY,\n                },\n              ],\n            },\n          ]}\n        >\n          {children}\n        </Animated.View>\n      </PanGestureHandler>\n    );\n  }\n}\n"]}